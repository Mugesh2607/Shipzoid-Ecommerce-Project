{% extends 'adminpanel/layouts/base.html' %}
{% load tz %}
{% block content %}

<div id="content-area" class="flex-1 p-4 lg:p-8 bg-gradient-to-br from-slate-50 to-slate-100 font-inter min-h-screen">
  <section id="order-detail-section" class="animate__animated animate__fadeIn">

    <!-- Top Bar with Back Button -->
    <div class="flex items-center justify-end mb-6 no-print">
      <a href="{% url 'adminpanel:dashboard' %}"
         class="group flex items-center gap-2 px-5 py-2 rounded-lg bg-shipzoid-teal text-white font-medium shadow-md hover:bg-teal-700 transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-shipzoid-teal/40">
        <span class="transition-transform duration-300 group-hover:-translate-x-1">
          <i class="fa-solid fa-arrow-left"></i>
        </span>
        <span>Back</span>
      </a>
    </div>

    <!-- Main Card -->
    <div class="animate-slideIn bg-white border border-slate-200 rounded-2xl shadow-md overflow-hidden">
      
      <!-- Tabs -->
      <div class="relative border-b border-slate-200">
        <div class="relative flex flex-wrap">
          <button class="tab-btn px-6 py-3 font-semibold text-slate-700 hover:text-shipzoid-teal transition-colors relative" data-tab="info">
            <span class="relative z-10">Profile Info</span>
            <span class="absolute inset-0 opacity-0 tab-ripple bg-shipzoid-teal/10 transition-opacity"></span>
          </button>
          <button class="tab-btn px-6 py-3 font-semibold text-slate-700 hover:text-shipzoid-teal transition-colors relative" data-tab="password">
            <span class="relative z-10">Change Password</span>
            <span class="absolute inset-0 opacity-0 tab-ripple bg-shipzoid-teal/10 transition-opacity"></span>
          </button>
        </div>
        <span id="tab-indicator" class="absolute bottom-0 h-[3px] bg-gradient-to-r from-shipzoid-teal via-emerald-500 to-shipzoid-teal rounded-full transition-transform duration-300 ease-out"></span>
        <span id="tab-glow" class="pointer-events-none absolute -bottom-1 h-3 w-28 blur-lg bg-shipzoid-teal/30 rounded-full transition-transform duration-300 ease-out"></span>
      </div>

      <!-- Tab Content -->
      <div class="p-6 space-y-6">

        <!-- Profile Info -->
        <div id="tab-info" class="tab-pane">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">First Name</label>
              <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition" value="{{ request.session.user.first_name|default_if_none:'' }}">
            </div>
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">Last Name</label>
              <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition" value="{{ request.session.user.last_name|default_if_none:'' }}">
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">Email</label>
              <input id="acc-email" type="email" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition" value="{{ request.session.user.email|default_if_none:'' }}">
            </div>
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">Phone</label>
              <input type="tel" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition" value="{{ request.session.user.phone|default_if_none:'' }}">
            </div>
          </div>

          <div class="space-y-2">
            <label class="text-sm font-medium text-slate-700">Address</label>
            <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition" value="{{ request.session.user.address|default_if_none:'' }}">
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 py-4">
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">City</label>
              <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition">
            </div>
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">State</label>
              <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition">
            </div>
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">ZIP</label>
              <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition">
            </div>
          </div>

          <div class="flex justify-end">
            <button id="save-info" class="px-6 py-2 rounded-lg bg-shipzoid-teal text-white hover:bg-teal-700 transition-all duration-300 transform hover:-translate-y-0.5 shadow focus:outline-none focus:ring-2 focus:ring-shipzoid-teal/40">Save Changes</button>
          </div>
        </div>

        <!-- Password -->
        <div id="tab-password" class="tab-pane hidden">
          <div class="space-y-2">
            <label class="text-sm font-medium text-slate-700">Current Password</label>
            <input id="cur-pass" type="password" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition">
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 py-4">
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">New Password</label>
              <input id="new-pass" type="password" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition">
            </div>
            <div class="space-y-2">
              <label class="text-sm font-medium text-slate-700">Confirm Password</label>
              <input id="conf-pass" type="password" class="w-full border border-slate-300 rounded-lg px-4 py-2 focus:border-shipzoid-teal focus:ring-2 focus:ring-shipzoid-teal/40 outline-none transition">
              <p id="match-hint" class="text-sm mt-1"></p>
            </div>
          </div>

          <div class="flex justify-end">
            <button id="save-pass" class="px-6 py-2 rounded-lg bg-shipzoid-teal text-white hover:bg-teal-700 transition-all duration-300 transform hover:-translate-y-0.5 shadow focus:outline-none focus:ring-2 focus:ring-shipzoid-teal/40">Change Password</button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Tab Animation Script -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const tabBtns = document.querySelectorAll(".tab-btn");
  const panes = document.querySelectorAll(".tab-pane");
  const indicator = document.getElementById("tab-indicator");
  const glow = document.getElementById("tab-glow");

  function activateTab(tabName) {
    tabBtns.forEach(btn => {
      const isActive = btn.dataset.tab === tabName;
      btn.classList.toggle("text-shipzoid-teal", isActive);
      btn.querySelector(".tab-ripple").classList.toggle("opacity-100", isActive);
    });
    panes.forEach(pane => {
      pane.classList.toggle("hidden", pane.id !== `tab-${tabName}`);
      if (!pane.classList.contains("hidden")) {
        pane.classList.add("animate__animated", "animate__fadeIn");
        setTimeout(() => pane.classList.remove("animate__fadeIn"), 400);
      }
    });

    const activeBtn = document.querySelector(`.tab-btn[data-tab="${tabName}"]`);
    if (activeBtn) {
      const offsetLeft = activeBtn.offsetLeft;
      const width = activeBtn.offsetWidth;
      indicator.style.transform = `translateX(${offsetLeft}px)`;
      indicator.style.width = `${width}px`;
      glow.style.transform = `translateX(${offsetLeft + width/2 - 56}px)`;
    }
  }

  tabBtns.forEach(btn => btn.addEventListener("click", () => activateTab(btn.dataset.tab)));
  activateTab("info");
});
</script>

{% endblock %}
