
<!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-40">
        <!-- Top Bar -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center gap-2 md:gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-shipzoid-teal to-shipzoid-teal-dark rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-lg">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="flex flex-col">
                        <h1 class="text-lg md:text-2xl font-bold bg-gradient-to-r from-shipzoid-navy to-shipzoid-teal bg-clip-text text-transparent truncate">
                            Shipzoid Store
                        </h1>
                        <p class="text-[10px] md:text-xs text-gray-500 truncate">Premium Shopping</p>
                    </div>
                </div>

                <!-- Search Bar -->
                {% comment %} <div class="hidden md:flex flex-1 max-w-md mx-8">
                    <div class="relative w-full">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input type="text" id="search-input" placeholder="Search products..."
                               class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-shipzoid-teal focus:border-transparent">
                    </div>
                </div> {% endcomment %}

                <!-- Navigation (Login + Cart + Wishlist) -->
                <div class="flex items-center gap-2 md:gap-4">

                {% if request.session.customer.logged_in %}
                    <!-- User Dropdown -->
                    <div class="relative group">
                        <button class="flex items-center p-2 text-gray-700 hover:text-shipzoid-teal transition-colors duration-200">
                            <i class="fas fa-user text-lg md:text-xl"></i>
                        </button>

                        <!-- Dropdown -->
                        <div class="absolute right-0 mt-2 w-48 bg-white border rounded-xl shadow-lg opacity-0 invisible 
                                    group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <ul class="py-2 text-sm text-gray-700">

                                    <!-- Welcome with green tick -->
                                    <li class="flex items-center px-4 py-2 border-b">
                                        <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                        <span class="font-medium text-gray-800">Hello, {{ request.session.customer.customer_name }}</span>
                                    </li>
                                    <!-- My Account -->
                                    <li>
                                        <a href="{% url 'ecommerce:myaccount'%}" class="flex items-center px-4 py-2 hover:bg-gray-100">
                                            <i class="fas fa-user-circle text-shipzoid-teal mr-2"></i>
                                            My Account
                                        </a>
                                    </li>
                                    <!-- Logout -->
                                    <li>
                                        <form id="logout-form" action="{% url 'ecommerce:customer_logout'%}" method="GET">
                                            {% csrf_token %}
                                            <button type="button" onclick="confirmLogout()" 
                                                class="flex items-center w-full text-left px-4 py-2 hover:bg-gray-100">
                                                <i class="fas fa-sign-out-alt text-red-500 mr-2"></i>
                                                Logout
                                            </button>
                                        </form>
                                    </li>
                                
                            </ul>
                        </div>
                    </div>

                {%else %}
                <!-- Login always visible --> 
                 <button id="open-auth-modal" onclick="openLoginModal()" class="flex items-center text-gray-700 hover:text-shipzoid-teal transition-colors duration-200 font-medium text-sm md:text-base">
                     <i class="fas fa-user mr-1 md:mr-2"></i>Login 
                </button>
                {% endif %}


                    <!-- Cart -->
                    <button id="cart-btn" class="relative p-2 text-gray-700 hover:text-shipzoid-teal transition-colors duration-200">
                        <i class="fas fa-shopping-cart text-lg md:text-xl"></i>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center hidden"></span>
                    </button>

                    <!-- Wishlist -->
                    <button id="wish-btn" class="relative p-2 text-gray-700 hover:text-shipzoid-teal transition-colors duration-200">
                        <i class="fas fa-heart text-lg md:text-xl"></i>
                        <span id="wish-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
                    </button>
                </div>
                
            </div>
        </div>

        <!-- Category Navigation -->
        <div class="bg-gray-50 border-t border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="relative py-4">
                    <!-- Left Arrow -->
                    <button id="scrollLeft" class="absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white hover:bg-gray-100 text-gray-700 rounded-full p-2 shadow-md transition-all duration-200 hidden lg:flex items-center justify-center">
                        <i class="fas fa-chevron-left"></i>
                    </button>

                    <!-- Scrollable Container -->
                    <nav id="categoryNav" class="flex space-x-8 overflow-x-auto overflow-visible scrollbar-hide scroll-smooth px-8 lg:px-12">
                        <!-- All Categories -->
                        <button onclick="window.location.href='{% url 'ecommerce:home' %}'" class="flex items-center gap-2 text-gray-700 hover:text-shipzoid-teal font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 py-2">
                            <i class="fas fa-th-large"></i>
                            All Categories
                        </button>

                        {% for category in categories %}                    
                        <div class="category-item flex-shrink-0 static">
                            <button class="category-btn flex items-center gap-2 text-gray-700 hover:text-shipzoid-teal font-medium transition-colors duration-200 whitespace-nowrap py-2" data-category-id="{{ category.id }}">
                                {{ category.name }}
                                <i class="fas fa-chevron-down text-xs transition-transform duration-200"></i>
                            </button>
                        </div>
                        {% endfor %}
                    </nav>

                    <!-- Right Arrow -->
                    <button id="scrollRight" class="absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white hover:bg-gray-100 text-gray-700 rounded-full p-2 shadow-md transition-all duration-200 hidden lg:flex items-center justify-center">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Dropdown Container (Outside scroll area) -->
        <div id="dropdownContainer" class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" style="margin-top: -1rem;">
            {% for category in categories %}
            <div class="category-dropdown absolute left-0 w-64 bg-white rounded-xl shadow-xl border opacity-0 invisible transition-all duration-300 z-50" data-category-id="{{ category.id }}" style="top: 0;">
                <div class="p-4">
                    <div class="space-y-2 max-h-96 overflow-y-auto">
                        {% for subcategory in subcategories %}
                            {% if subcategory.category_id == category.id %}
                            <a href="{% url 'ecommerce:subcategory' subcategory.encrypted_id %}" class="block px-4 py-2 text-gray-700 hover:bg-shipzoid-teal hover:text-white rounded-lg transition-colors duration-200">
                                {{ subcategory.name }}
                            </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </header>



          <!-- Advanced Login/Signup Modal -->
        <div id="auth-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-lg w-full max-w-5xl flex overflow-hidden relative">
                <!-- Left Side -->
                <div class="hidden md:flex flex-col justify-center p-8 bg-gradient-to-br from-shipzoid-teal to-emerald-500 text-white w-1/2">
                    <h2 class="text-3xl font-bold mb-4">Welcome to Shipzoid!</h2>
                    <p class="mb-6 text-sm opacity-90">
                        Join millions of happy customers and enjoy the best online shopping experience with exclusive deals and fastest delivery.
                    </p>
                    <div class="space-y-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-shipping-fast"></i><span>Free & Fast Delivery</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-shield-alt"></i><span>Secure Shopping</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-percent"></i><span>Exclusive Offers</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-headset"></i><span>24/7 Customer Support</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-undo"></i><span>Easy Returns & Exchanges</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-star"></i><span>Premium Membership Benefits</span>
                        </div>
                    </div>
                </div>

                <!-- Right Side -->
                <div class="flex-1 p-8 relative">
                    <!-- Close Button -->
                    <button onclick="closeAuthModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>

                    <!-- Tabs -->
                    <div class="flex mb-6 border-b border-gray-200">
                        <button class="auth-tab active px-4 py-2 text-shipzoid-teal font-semibold border-b-2 border-shipzoid-teal" onclick="switchAuthTab('login', event)">Login</button>
                        <button class="auth-tab px-4 py-2 text-gray-500 hover:text-shipzoid-teal" onclick="switchAuthTab('signup', event)">Sign Up</button>
                    </div>

                    <!-- Login Form -->
                    <form id="login-form" class="auth-form active space-y-4" data-url="{% url 'ecommerce:customer_login' %}">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Phone Number</label>
                            <input id="login-phone" type="text" placeholder="Enter your phone number" oninput="ValidatePhoneNumber(this)"
                                class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-shipzoid-teal" required>
                            <div id="login-email-error" class="text-red-500 text-sm mt-1"></div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Password</label>
                            <div class="relative">
                                <input id="login-password" type="password" placeholder="Enter your password" autocomplete="off"
                                    class="mt-1 w-full border rounded-lg px-3 py-2 pr-10 focus:outline-none focus:ring focus:ring-shipzoid-teal" required>
                                <button type="button" onclick="togglePassword('login-password', this)"
                                    class="absolute inset-y-0 right-3 flex items-center text-gray-400">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div id="login-password-error" class="text-red-500 text-sm mt-1"></div>
                        </div>

                        <button id="login-btn" type="submit"
                            class="w-full bg-shipzoid-teal text-white py-2 rounded-lg hover:bg-emerald-600 transition transform hover:scale-105">
                            <span>Sign In</span>
                            <div class="loading hidden"></div>
                        </button>
                    </form>

                    <!-- Signup Form -->
                  <form id="signup-form" class="auth-form hidden space-y-4" data-url="{% url 'ecommerce:create_customer' %}">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Full Name</label>
                            <input id="signup-name" type="text" name="full_name" placeholder="Enter your full name"
                                class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-shipzoid-teal" required>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Phone Number</label>
                            <input id="signup-phone" type="tel" name="phone_number" placeholder="Enter your phone number" oninput="ValidatePhoneNumber(this)"
                                class="mt-1 w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-shipzoid-teal" required>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Password</label>
                            <div class="relative">
                                <input id="signup-password" type="password" name="password" placeholder="Create a strong password" autocomplete="off"
                                    class="mt-1 w-full border rounded-lg px-3 py-2 pr-10 focus:outline-none focus:ring focus:ring-shipzoid-teal" required>
                                <button type="button" onclick="togglePassword('signup-password', this)"
                                    class="absolute inset-y-0 right-3 flex items-center text-gray-400">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700">Confirm Password</label>
                            <div class="relative">
                                <input id="signup-confirm-password" type="password" name="confirm_password" placeholder="Confirm your password" autocomplete="off"
                                    class="mt-1 w-full border rounded-lg px-3 py-2 pr-10 focus:outline-none focus:ring focus:ring-shipzoid-teal" required>
                                <button type="button" onclick="togglePassword('signup-confirm-password', this)"
                                    class="absolute inset-y-0 right-3 flex items-center text-gray-400">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="text-sm">
                            <label class="flex items-start gap-2">
                                <input type="checkbox" required class="mt-1 text-shipzoid-teal">
                                <span>I agree to the <a href="#" class="text-shipzoid-teal hover:underline">Terms of Service</a> and 
                                    <a href="#" class="text-shipzoid-teal hover:underline">Privacy Policy</a></span>
                            </label>
                        </div>

                        <button id="signup-btn" type="submit"
                            class="w-full bg-shipzoid-teal text-white py-2 rounded-lg hover:bg-emerald-600 transition transform hover:scale-105">
                            <span>Create Account</span>
                        </button>
                    </form>

                </div>
            </div>
        </div>

        <!-- Product Detail Modal -->
        <div id="product-modal" class="fixed inset-0 bg-black/50 modal-backdrop z-50 hidden opacity-0 transition-all duration-300">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto transform scale-95 transition-all duration-300" id="product-modal-content">
                    <div class="p-8">
                        <!-- Modal Header -->
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900">Product Details</h3>
                            <button id="close-product-modal" class="text-gray-500 hover:text-gray-700 text-2xl">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>

                        <!-- Product Content -->
                        <div id="product-detail-content" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Product content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Modal -->
        <div id="cart-modal" class="fixed inset-0 bg-black/50 z-50 hidden opacity-0 transition-all duration-300">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div
                    class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl transform scale-95 transition-all duration-300 flex flex-col max-h-[90vh]"
                    id="cart-modal-content"
                >
                    <!-- Modal Header -->
                    <div class="p-6 border-b flex justify-between items-center">
                        <h3 class="text-2xl font-bold text-gray-900">Shopping Cart</h3>
                        <button id="close-cart-modal" class="text-gray-500 hover:text-gray-700 text-2xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Cart Content -->
                    <div id="cart-content" class="p-6 flex-1 overflow-y-auto space-y-4">
                        <!-- JavaScript will dynamically fill this -->
                    </div>

                    <!-- Cart Footer -->
                    <div id="cart-footer" class="p-6 border-t bg-gray-50 flex justify-between items-center sticky bottom-0">
                        <div class="text-lg font-semibold text-gray-900">
                            Total: â‚¹<span id="cart-total">0.00</span>
                        </div>
                        <button onclick="window.location.href='{% url 'ecommerce:checkout'%}'"
                            id="checkout-btn"
                            class="bg-shipzoid-teal text-white px-6 py-3 rounded-xl font-semibold hover:bg-shipzoid-teal-dark transition-all duration-300 transform hover:scale-105"
                        >
                            Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Wishlist Modal -->
        <div id="wishlist-modal" class="fixed inset-0 bg-black/50 z-50 hidden opacity-0 transition-all duration-300">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl transform scale-95 transition-all duration-300 flex flex-col max-h-[90vh]" id="wishlist-modal-content">
                    
                    <!-- Modal Header -->
                    <div class="p-6 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-heart text-red-500 text-2xl"></i>
                            <h3 class="text-2xl font-bold text-gray-900">My Wishlist</h3>
                        </div>
                        <button id="close-wishlist-modal" class="text-gray-500 hover:text-gray-700 text-2xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Wishlist Content -->
                    <div id="wishlist-content" class="p-6 flex-1 overflow-y-auto space-y-4">
                        <!-- JavaScript will dynamically populate wishlist items -->
                    </div>

                    <!-- Empty Wishlist Message -->
                    <div id="empty-wishlist" class="flex-1 flex flex-col items-center justify-center text-center p-8 hidden">
                        <i class="fas fa-heart text-gray-300 text-6xl mb-4"></i>
                        <h4 class="text-xl font-semibold text-gray-500 mb-2">Your wishlist is empty</h4>
                        <p class="text-gray-400 mb-6">Start adding items you love to your wishlist</p>
                        <button onclick="closeWishlist()" class="bg-shipzoid-teal text-white px-6 py-2 rounded-lg hover:bg-shipzoid-teal-dark transition-colors">
                            Continue Shopping
                        </button>
                    </div>
                </div>
            </div>
        </div>


        {% comment %} <div id="success-toast" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-y-full transition-all duration-300">
            <div class="flex items-center gap-2">
                <i class="fas fa-check-circle"></i>
                <span id="success-message"></span>
            </div>
        </div>

        <div id="error-toast" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-y-full transition-all duration-300">
            <div class="flex items-center gap-2">
                <i class="fas fa-check-circle"></i>
                <span id="error-message"></span>
            </div>
        </div> {% endcomment %}


        <!-- Success Toast -->
        <div id="cart-success" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 hidden">
        <div class="flex items-center gap-2">
            <i class="fas fa-check-circle"></i>
            <span id="cart-success-message">Product added to cart!</span>
        </div>
        </div>

        <!-- Error Toast -->
        <div id="cart-error" class="fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 hidden">
        <div class="flex items-center gap-2">
            <i class="fas fa-times-circle"></i>
            <span id="cart-error-message">Something went wrong!</span>
        </div>
        </div>

